(this.webpackJsonpfred=this.webpackJsonpfred||[]).push([[0],{28:function(t,e,n){"use strict";t.exports=n(74)},52:function(t,e,n){t.exports=n(86)},69:function(t,e,n){},71:function(t,e,n){},74:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,r=(a=n(75))&&a.__esModule?a:{default:a};function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],a=!0,r=!1,c=void 0;try{for(var o,i=t[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!e||n.length!==e);a=!0);}catch(u){r=!0,c=u}finally{try{a||null==i.return||i.return()}finally{if(r)throw c}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=function(t){return"string"===typeof t?t.split(" ").map(i):t},i=function(t){return/(\w)(-?\d+)[, ](-?\d+)/g.exec(t).slice(1)},u={M:"moveTo",L:"lineTo",R:"moveTo"},l=function(t){var e="#000",n=t.getContext("2d"),a=(0,r.default)(),i=a.schedule,l=a.start,s={clear:function(){return t.width+=0,s},color:function(t){return e=t,s},path:function(t){var a,r,s=+(t=o(t))[0][1],f=+t[0][2],d=t[t.length-1][1]-s,h=t[t.length-1][2]-f,m=Math.sqrt(d*d+h*h),p=Math.atan2(h,d),v=t.map(function(t){var e=c(t,3),n=e[0],a=e[1],r=e[2],o=a-s,i=r-f;return{command:n,r:Math.sqrt(o*o+i*i)/m,a:Math.atan2(i,o)-p}}),b=[{x0:s,y0:f,radius:m,angle:p,depth:0}];l();i(function t(){if(b.length){var c=b.shift(),o=c.x0,l=c.y0,s=c.radius,f=c.angle,d=c.depth;n.beginPath(),n.strokeStyle="function"===typeof e?e(d):e;for(var h=0;h<v.length;++h){var m=v[h],p=m.command,g=m.r,E=m.a,j=o+g*s*Math.cos(E+f),O=l+g*s*Math.sin(E+f);if(n[u[p]](j,O),"R"===p){var y=j-a,x=O-r,w=Math.sqrt(y*y+x*x);g*w>=.5&&b.push({x0:a,y0:r,radius:w,angle:Math.atan2(x,y),depth:d+1})}a=j,r=O}n.stroke(),i(t)}})}};return s};e.default=l},75:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){var t=!1,e=[],n=function n(){if(e.length){for(var a=Date.now()+16;e.length&&Date.now()<a;)e.shift()();requestAnimationFrame(n)}else t=!1};return{schedule:function(a){e.push(a),t||(t=!0,n())},start:function(){e=[]}}};e.default=a},76:function(t,e,n){},78:function(t,e,n){},79:function(t,e,n){},80:function(t,e,n){},81:function(t,e,n){},82:function(t,e,n){},83:function(t,e,n){},84:function(t,e,n){},85:function(t,e,n){},86:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(17),o=n(13),i=n(44),u=n.n(i),l=n(2),s=function(t){return t},f=function(){},d=function(t){return t.stopPropagation()},h=function(t){if(4===t.length){var e=t.substr(1),n=Object(l.a)(e,3),a=n[0],r=n[1],c=n[2];return"#"+a+a+r+r+c+c}return t},m={h8:function(t){return"hsl(".concat(Math.round(8*t),", 100%, 50%)")}},p=function(t){return m[t]||t},v=function(t){return/[0-9a-f]{3}|[0-9a-f]{6}/.test(t)},b=n(14),g=n(10),E=n(9),j=n(16),O=function(t){return{type:"ADD",item:t}},y=function(t){return{type:"REMOVE",index:t}},x=function(t,e){return{type:"UPDATE",index:t,items:e}},w=n(45),k=function(t){return t.split(";").map(C)},C=function(t){var e=t.split(":"),n=Object(l.a)(e,2),a=n[0],r=n[1];return{path:a.match(/\w-?\d+\.?\d*,-?\d+\.?\d*/g).map(N),color:v(r)?"#"+r:r}},N=function(t){return t.match(/(\w)(-?\d+\.?\d*),(-?\d+\.?\d*)/).slice(1).map(P)},M=function(t){return t.map(R).join(";")},R=function(t){var e=t.path,n=t.color;return e.map(S).join("")+":"+n.replace("#","")},S=function(t){var e=Object(w.a)(t);return e[0]+e.slice(1).join(",")},D={parse:function(t){return t.split("|").map(k)},format:function(t){return t.map(M).join("|")}},P=function(t){return isNaN(parseFloat(t))?t:parseFloat(t)},A=(n(69),Object(o.b)(s,function(t){return Object(g.a)({add:O},t)})(function(t){var e=t.add,n=t.items,a=(Object(b.h)({path:"/:type/:id"})||{}).params,c=void 0===a?{}:a;return r.a.createElement("div",{className:"menuBar"},r.a.createElement("span",{className:"logo",title:"Fractal Editor"},"FrEd"),("view"===c.type?function(t){return r.a.createElement(E.b,{to:"/edit/".concat(n.length),className:"tab btn edit",onClick:function(){return e(k(t))}},"Click to Edit this Fractal")}:function(t){return r.a.createElement("span",null,r.a.createElement(E.b,{exact:!0,to:"/",activeClassName:"active",className:"tab"},"My Fractals"),t&&r.a.createElement(E.b,{to:"/edit/".concat(t),activeClassName:"active",className:"tab"},"Edit"),t&&r.a.createElement(E.b,{to:"/share/".concat(t),activeClassName:"active",className:"tab btn"},"Share"))})(c.id))})),F=(n(71),function(t){var e=t.children;return r.a.createElement("div",{className:"app"},r.a.createElement(A,null),e)}),L=n(27);var I=function(){function t(){return{width:window.innerWidth,height:window.innerHeight}}var e=Object(a.useState)(t),n=Object(l.a)(e,2),r=n[0],c=n[1];return Object(a.useEffect)(function(){function e(){c(t())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]),r},T=n(18),_=n(19),z=n(21),q=n(20),B=n(22),J=n(28),U=n.n(J),G=window.devicePixelRatio,V=function(t){return t.map(H)},H=function(t){var e=Object(l.a)(t,3),n=e[0],a=e[1],r=e[2];return[n,a*G,r*G]},W=function(t){function e(){var t,n;Object(T.a)(this,e);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(z.a)(this,(t=Object(q.a)(e)).call.apply(t,[this].concat(r)))).renderCanvas=function(){var t=n.props.commands,e=t.path,a=t.color;n.canvas.clear().color(p(a)).path(V(e))},n.componentDidUpdate=n.renderCanvas,n}return Object(B.a)(e,t),Object(_.a)(e,[{key:"shouldComponentUpdate",value:function(t){var e=this.props,n=e.commands,a=e.width,r=e.height;return n!==t.commands||a!==t.width||r!==t.height}},{key:"componentDidMount",value:function(){this.canvas=U()(Object(c.findDOMNode)(this)),this.renderCanvas()}},{key:"render",value:function(){var t=this.props,e=t.width,n=t.height;return r.a.createElement("canvas",{width:e*G,height:n*G,style:{width:e,height:n}})}}]),e}(a.Component),X=n(3),Y=n(29),$=n(4),K=(n(76),function(t){var e=Object(a.useState)(void 0),n=Object(l.a)(e,2),c=n[0],o=n[1],i=Object(Y.a)(function(e){var n=Object(l.a)(e.movement,2),a=n[0],r=n[1];e.first&&o({x:t.x,y:t.y}),e.last&&o(void 0);var i={x:(c||t).x+a,y:(c||t).y+r};t.onDrag(i)});return r.a.createElement("div",Object.assign({className:"Marker",style:{transform:"translate(".concat(t.x,"px,").concat(t.y,"px)")}},i()))});function Q(){var t=Object(X.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n"]);return Q=function(){return t},t}var Z=$.a.section(Q()),tt=function(t){var e=t.commands,n=e.path,c=e.color,o=t.onDrag;Object(a.useEffect)(function(){return document.documentElement.style.overflow="hidden",function(){document.documentElement.style.overflow=""}},[]);var i=Object(Y.b)(function(t){if(t.event){for(var e=t.event,a=e.clientX,r=e.clientY,i=t.movement,u=Math.exp(i[1]/1e4),l=0;l<n.length;l++){var s=n[l][1]-a,f=n[l][2]-r;n[l][1]=a+s*u,n[l][2]=r+f*u}o({path:n,color:c})}});return r.a.createElement(Z,i(),n.map(function(t,e){var a=Object(l.a)(t,3),i=a[1],u=a[2];return r.a.createElement(K,{key:e,x:i,y:u,onDrag:function(t){var a=t.x,r=t.y;n[e][1]=a,n[e][2]=r,o({path:n,color:c})}})}))};function et(){var t=Object(X.a)(["\n  align-items: center;\n  background: transparent;\n  box-shadow: ",";\n  border: none;\n  color: ",";\n  cursor: ",";\n  display: flex;\n  font-size: 14px;\n  height: 30px;\n  outline: none;\n"]);return et=function(){return t},t}var nt=$.a.button(et(),function(t){return t.active?"0 -2px 0 #fff inset":""},function(t){return t.active?"#fff":"#ffffff60"},function(t){return t.active?"":"pointer"});function at(){var t=Object(X.a)(["\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  padding: 0;\n  border: none;\n  background: $menuBarBG;\n  border-radius: 5px;\n  font-size: 10em;\n  margin: 0 5px 0 0;\n"]);return at=function(){return t},t}function rt(){var t=Object(X.a)(["\n  color: #2b57d0;\n  margin-right: 5px;\n  font-weight: 700;\n  text-transform: uppercase;\n"]);return rt=function(){return t},t}function ct(){var t=Object(X.a)(["\n  background: linear-gradient(to right, #ff0000 0%, #00ff11 50%, #0800ff 100%);\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  margin-right: 5px;\n  border-radius: 5px;\n"]);return ct=function(){return t},t}function ot(){var t=Object(X.a)(["\n  display: flex;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  right: 5px;\n"]);return ot=function(){return t},t}var it=$.a.section(ot()),ut=$.a.span(ct()),lt=$.a.header(rt()),st=$.a.input(at()),ft=function(t){var e=t.onChange,n=t.value,c=v(n),o=Object(a.useState)("#000"),i=Object(l.a)(o,2),u=i[0],s=i[1];return Object(a.useEffect)(function(){c&&s(n)},[n]),r.a.createElement(it,null,r.a.createElement(lt,null,"Color"),r.a.createElement(nt,{active:c,onClick:function(){return e(u)}},r.a.createElement(st,{type:"color",title:"Change color",value:u,onChange:function(t){var n=t.target;return e(n.value)}}),"Solid"),r.a.createElement(nt,{active:!c,onClick:function(){return e("h8")}},r.a.createElement(ut,null),"Gradient"))},dt=(n(78),function(t){return r.a.createElement("div",{className:"toolbar"},t.children)}),ht=(n(79),function(t){function e(){var t,n;Object(T.a)(this,e);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(z.a)(this,(t=Object(q.a)(e)).call.apply(t,[this].concat(r)))).state={pathIndex:0},n.addPath=function(){console.log("addPath")},n.setPath=function(t){n.setState({pathIndex:t})},n.onChangeColor=function(t){var e=n.state.pathIndex,a=n.props.commands[e].path;n.onChange({path:a,color:t})},n.onChange=function(t){var e=n.state.pathIndex;n.props.onChange(pt(n.props.commands,e,t))},n}return Object(B.a)(e,t),Object(_.a)(e,[{key:"render",value:function(){var t=this,e=this.state.pathIndex,n=this.props,a=n.className,c=void 0===a?"":a,o=n.commands,i=n.width,u=n.height,l=n.children,s={width:i,height:u,position:"fixed"};return r.a.createElement("div",{className:"editor "+c,style:s},r.a.createElement(dt,null,r.a.createElement("div",{className:"layers"},o.map(function(n,a){var c=n.color;return r.a.createElement("div",{className:"layer"+(e===a?" active":""),key:a,title:e===a?"Active layer":"Edit this layer",onClick:function(){return t.setPath(a)}},r.a.createElement("div",{className:"color",style:{background:mt[c]||c}}))})),r.a.createElement(ft,{value:h(o[e].color),onChange:this.onChangeColor})),o.map(function(t,e){return r.a.createElement(W,{key:e,commands:t,width:i,height:u})}),r.a.createElement(tt,{commands:o[e],width:i,height:u,onDrag:this.onChange,onChange:this.onChange}),l)}}]),e}(a.Component)),mt={h8:"linear-gradient(to right, #ff0000 0%, #00ff11 50%, #0800ff 100%)"},pt=function(t,e,n){return[].concat(Object(j.a)(t.slice(0,e)),[n],Object(j.a)(t.slice(e+1)))};function vt(){var t=Object(X.a)(["\n  user-select: none;\n  background: #66a064;\n  color: rgba(255, 255, 255, 0.7);\n  width: 100%;\n  border: none;\n  font-size: 24px;\n  height: 80px;\n  cursor: pointer;\n  transition-property: background, color;\n  transition-duration: 0.3s;\n\n  &:hover {\n    background: #41a000;\n    color: #fff;\n  }\n"]);return vt=function(){return t},t}var bt=$.a.button(vt()),gt=function(t){var e=t.action;return r.a.createElement(bt,{title:"Add",onClick:e},"Add")},Et=function(t){var e=t.commands,n=t.width,c=t.height,o=t.style,i=Object(a.useRef)(),u=Object(a.useRef)();return Object(a.useEffect)(function(){u.current=U()(i.current)},[]),Object(a.useEffect)(function(){u.current.clear(),e.forEach(function(t){var e=t.path,n=t.color;u.current.color(p(n)).path(e)})},[e,n,c]),r.a.createElement("canvas",{ref:i,width:n,height:c,style:o})},jt=(n(80),function(t){return r.a.createElement("div",Object.assign({className:"remove",title:"Remove"},t),"×")});function Ot(){var t=Object(X.a)(["\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  height: 300px;\n  padding: 0;\n"]);return Ot=function(){return t},t}function yt(){var t=Object(X.a)(["\n  display: inline-block;\n  background: #ffffff1a;\n  position: relative;\n  margin: 0 20px 20px 0;\n  border-radius: 10px;\n\n  &:hover {\n    background: #ffffff33;\n  }\n"]);return yt=function(){return t},t}function xt(){var t=Object(X.a)(["\n  padding: 20px;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n"]);return xt=function(){return t},t}var wt,kt,Ct=$.a.section(xt()),Nt=$.a.section(yt()),Mt=$.a.button(Ot()),Rt=function(t){var e=t.children,n=t.onRemove,a=t.onSelect;return r.a.createElement(Ct,null,e.map(function(t,e){return r.a.createElement(Nt,{key:e},r.a.createElement(Mt,{onClick:function(){return a(e)}},r.a.createElement(Et,{commands:t,width:500,height:500,style:{width:"250px"}})),r.a.createElement(jt,{onClick:function(){return n(e)}}))}))},St=(n(81),Object(o.b)(s,function(t){return Object(g.a)({add:O,push:L.push,remove:y,update:x},t)})(function(t){var e,n,a=t.items,c=t.add,o=t.remove,i=t.update,u=I(),l=u.width,s=u.height,f=Object(b.g)().id,h=Object(b.f)();return r.a.createElement("div",{className:"screens"},void 0===f?r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{onSelect:function(t){h.push("/edit/"+t)},onRemove:o},a),r.a.createElement(gt,{action:(e=c,n=d,function(t){return e(n(t))})})):r.a.createElement(ht,{width:l,height:s-30,commands:a[f],onChange:function(t){return i(f,t)}}))})),Dt=(n(82),function(t){function e(){return Object(T.a)(this,e),Object(z.a)(this,Object(q.a)(e).apply(this,arguments))}return Object(B.a)(e,t),Object(_.a)(e,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),e}(a.Component)),Pt=(n(83),Object(o.b)(s)(function(t){var e=t.items,n=Object(a.useRef)(null),c=Object(b.g)().id;Object(a.useEffect)(function(){Ft||n.current.focus()},[]);var o=e[c],i="https://indamix.github.io/fred/#/view/"+M(o);return r.a.createElement("div",{className:"sharePanel"},r.a.createElement("h1",null,"Share your Fractal"),r.a.createElement("h2",null,"In social media"),r.a.createElement(Dt,{text:"Fractal Editor",url:i}),r.a.createElement("h2",null,"By sharing the link"),r.a.createElement("textarea",{ref:n,value:i,readOnly:!0,onFocus:At}))})),At=function(t){return t.target.select()},Ft=/iPad|iPhone|iPod/.test(window.navigator.userAgent)&&!window.MSStream,Lt=(n(84),function(){var t=Object(b.g)().path,e=I(),n=e.width,a=e.height;return r.a.createElement("div",{className:"view"},k(t).map(function(t,e){return r.a.createElement(W,{key:e,commands:t,width:n,height:a})}))}),It=r.a.createElement(F,null,r.a.createElement(b.c,null,r.a.createElement(b.a,{exact:!0,path:"/",component:St}),r.a.createElement(b.a,{path:"/edit/:id",component:St}),r.a.createElement(b.a,{path:"/share/:id",component:Pt}),r.a.createElement(b.a,{path:"/view/:path",component:Lt}))),Tt=Object(g.b)({routing:L.routerReducer,items:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case"ADD":return[].concat(Object(j.a)(t),[e.item||[{color:"#f0e",path:[["M",36,155],["L",95,252],["R",196,316],["R",312,159],["L",298,40]]},{color:"#80f",path:[["M",8,617],["L",82,650],["R",290,651],["R",759,463],["L",645,684]]}]]);case"REMOVE":return t.splice(e.index,1),Object(j.a)(t);case"UPDATE":return t[e.index]=e.items,Object(j.a)(t);default:return t}}}),_t=n(49),zt=function(t){try{var e=t.load("test");t.save("test",0),t.save("test",e)}catch(n){return!1}return!0}(wt={load:function(t){return localStorage.getItem(t)},save:function(t,e){return localStorage.setItem(t,e)}})?wt:Object(_t.a)({},wt,{},{save:f}),qt={parse:function(t){return t?JSON.parse(t):void 0},format:JSON.stringify},Bt=(n(85),function(t){var e,n=t.key,a=t.formatting,r=void 0===a?qt:a;return{save:function(t){var a=r.format(t);e!==a&&(e=a,zt.save(n,a))},load:function(){var t=zt.load(n);return e=t,t&&r.parse(t)}}}({key:"fred",formatting:D})),Jt=(kt={items:Bt.load()||[[{color:"#f0e",path:[["M",36,155],["L",95,252],["R",196,316],["R",312,159],["L",298,40]]},{color:"#80f",path:[["M",8,617],["L",82,650],["R",290,651],["R",759,463],["L",645,684]]}]]},Object(g.c)(Tt,kt));Jt.subscribe(u()(function(){var t=Jt.getState().items;Bt.save(t)},1e3));var Ut=document.createElement("div");document.body.appendChild(Ut),Object(c.render)(r.a.createElement(o.a,{store:Jt},r.a.createElement(E.a,null,It)),Ut)}},[[52,1,2]]]);